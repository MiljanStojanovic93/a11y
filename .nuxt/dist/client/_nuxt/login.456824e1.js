import{_ as P}from"./nuxt-link.9e88655f.js";import{d as T,u as E,a as L,x as U,a8 as D,b as p,o as f,c,e,f as l,j as a,l as _,n as y,t as S,m as V,g as k,v as w,k as M,F as j,a2 as z}from"./entry.bde0faaf.js";import{u as R,a as W,s as Y,d as h}from"./form.41b0e6ae.js";import"./screenSizes.19d85ebf.js";const q={class:"mb-4 w-full"},A={key:0,class:"p-error mt-1"},G={class:"mb-4 w-full"},H={key:0,class:"p-error mt-1"},J={class:"mb-4 flex flex-wrap gap-3"},K={class:"mt-4"},as=T({__name:"login",setup(O){const I=E(),{auth:g}=L(),b=U(),{useFieldModel:C,handleSubmit:F,errors:t,submitCount:B}=R({validationSchema:Y}),[m,d]=C(["email","password"]),{isSubmitted:n}=W(B),v=F(async({email:i,password:s})=>{const{data:r,error:u}=await g.signInWithPassword({email:i,password:s});u&&b.add({severity:"error",summary:u.message,life:3e3}),r.user&&(b.add({severity:"success",summary:"You successfully logged in",life:3e3}),await g.updateUser({email:r.user.email}))},({errors:i})=>h(i));return D(()=>{I.value&&z("/")}),(i,s)=>{const r=p("InputText"),u=p("Password"),x=P,N=p("Button");return f(),c(j,null,[s[8]||(s[8]=e("div",{class:"mb-8"},[e("h1",{class:"Login"},"Log in"),e("span",null,"Please enter your details")],-1)),e("form",{class:"flex flex-col",novalidate:"",onSubmit:s[2]||(s[2]=M((...o)=>a(v)&&a(v)(...o),["prevent"]))},[e("span",q,[s[3]||(s[3]=e("label",{for:"email"}," Email ",-1)),l(r,{id:"email",modelValue:a(m),"onUpdate:modelValue":s[0]||(s[0]=o=>_(m)?m.value=o:null),"data-testid":"login-email-field",class:y(["p-inputtext-lg md:w-25rem w-full",[{"p-invalid":a(t).email&&a(n)}]]),type:"email",name:"email"},null,8,["modelValue","class"]),a(t).email&&a(n)?(f(),c("small",A,S(a(t).email),1)):V("",!0)]),e("span",G,[s[4]||(s[4]=e("label",{for:"password"}," Password ",-1)),l(u,{modelValue:a(d),"onUpdate:modelValue":s[1]||(s[1]=o=>_(d)?d.value=o:null),"input-id":"password","data-testid":"login-password-field",class:y(["p-inputtext-lg md:w-25rem w-full",[{"p-invalid":a(t).password&&a(n)}]]),"input-class":"w-full",feedback:!1,"toggle-mask":"",pt:{input:{name:"password"}}},null,8,["modelValue","class"]),a(t).password&&a(n)?(f(),c("small",H,S(a(t).password),1)):V("",!0)]),e("div",J,[l(x,{to:"reset-password",class:"text-600 hover:text-primary transition-duration-300 ml-auto cursor-pointer transition-colors"},{default:k(()=>s[5]||(s[5]=[w(" Forgot your password? ")])),_:1})]),l(N,{label:"Log In",class:"p-button-lg mb-4 w-full",type:"submit","data-testid":"login-submit-button"}),e("p",K,[s[7]||(s[7]=w(" Donâ€™t have an account yet? ")),l(x,{to:"/register"},{default:k(()=>s[6]||(s[6]=[w("Sign up")])),_:1})])],32)],64)}}});export{as as default};
